<!DOCTYPE html>
<html>
    <head>
        <title>HDBMS 1 | 1. Előadás</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="created" content="2018-02-17T21:26:03+0100"/>
        <meta name="modified" content="2018-02-17T22:46:17+0100"/>
        <meta name="tags" content="University/4_Félév/HDBMS, University/4_Félév, University"/>
        <meta name="last device" content="Levente’s-MacBook"/>
    </head>
    <body>
        <div class="note-wrapper">
            <h1>HDBMS 1 | 1. Előadás</h1>
<p><a href="it.inf.unideb.hu/honlap/halado_dbms1">A tárgy honlapja</a></p>
<p><a href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/lnpls/toc.htm">Oracle PL/SQL Refrence</a></p>
<br>
<h2>PL/SQL</h2>
<ul><li>Procedural Language for SQL
</li><li>Kombinálja az SQL adatmanipulációt a procedurális nyelvi feldolgozással
</li><li>Ada-szerű szintakszis
</li><li>Blokkszerkezetű nyelv
</li><li>A köverkező konstrukciókkal egészíti ki az SQL-t:
<ul><li>	változók és típusok
</li><li>	vezérlési szerkezetek
</li><li>	alprogramok és csomagok
</li><li>	kurzorok és kurzorváltozók
</li><li>	kivételkezelés
</li><li>	objektumorientált eszközök
</li></ul>
</li></ul>
<br>
<h2>PL/SQL blokk</h2>
<pre><code class='code-multiline'>[címke]
[Declare
	deklarációs utasítás(ok)]
<span class="sf_code_syntax_keyword">BEGIN</span>
	végrehajtható utasítás(ok)
	[EXCEPTION
		kivételkezelő]
END [név];</code></pre>
<p><br></p>
<ul><li>A blokk a PL/SQL alapvető programegysége. Kezelhető önállóan és beágyazható más programegységbe. A blokk megjelenhet bárhol a programban, ahol végrehajtható utasítás állhat.
</li><li>A blokknak három alapvető része van, melyek közül az első és utolsó opcionális:
<ul><li>	<i>deklarációs</i>
</li></ul>
</li></ul>
<p>*	* végrehajtható*</p>
<p>*	* kivételkezelő*</p>
<ul><li>Egy lokális név a deklarációjától kezdve látszik. A deklarációk hatásköre a blokk végéig tart.
</li><li>Címke: A PL/SQL-programban bármely <i>végrehajtható</i> utasítás címkézhető. A címke egy azonosító, amelyet a << és >> szimbólumok határolnak, és az utasítás előtt áll.
</li></ul>
<br>
<pre><code class='code-multiline'><span class="sf_code_syntax_keyword">BEGIN</span>
	<span class="sf_code_syntax_keyword">null</span>;
END;</code></pre>
<p><br></p>
<pre><code class='code-multiline'><span class="sf_code_syntax_keyword">&lt;&lt;</span>pelda<span class="sf_code_syntax_keyword">&gt;&gt;</span>
<span class="sf_code_syntax_keyword">BEGIN</span>
	<span class="sf_code_syntax_keyword">delete</span> <span class="sf_code_syntax_keyword">from</span> orszagok;
END;</code></pre>
<p><br></p>
<h2>Deklarációs rész</h2>
<ul><li>tipus definíció
</li><li>változó deklaráció
</li><li>nevesített konstans deklaráció
</li><li>kivétel deklaráció
</li><li>kurzor definíció
</li><li>alprogram definíció
</li><li>(pragma)
</li></ul>
<br>
<h3>Deklaráció</h3>
<ul><li>A deklaráció tárhelyet foglal le a megadott adattípusú értékhez és elnevezi a tárhelyet, hogy hivatkozni tudjuk.
</li><li>Az objektumokat deklarálni kell, mielőtt hivatkozzuk őket.
</li><li>A deklaráció szerepelhet blokkok, alprogramok, és csomagok deklarációs részében.
</li></ul>
<br>
<h3>Nevesített konstans</h3>
<pre><code class='code-multiline'>név CONSTANT típus [<span class="sf_code_syntax_keyword">NOT NULL</span>] {:<span class="sf_code_syntax_keyword">=</span> | DEFAULT} kifejezés;</code></pre>
<br>
<pre><code class='code-multiline'>max_napok_szama CONSTANT <span class="sf_code_syntax_project">NUMBER</span> :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">366</span>;</code></pre>
<br>
<ul><li>A nevesített konstansnál kötelező a kifejezés megadása.
</li><li>A nevesített konstansok és változók kezdőértékadása mindig megtörténik valahányszor aktivizálódik az a blokk vagy alprogram, amelyben deklaráltuk őket.
</li></ul>
<br>
<h3>Változó</h3>
<pre><code class='code-multiline'>név típus [[<span class="sf_code_syntax_keyword">NOT NULL</span>] {:<span class="sf_code_syntax_keyword">=</span> | DEFAULT} kifejezés];</code></pre>
<br>
<pre><code class='code-multiline'>szuletesi_ido <span class="sf_code_syntax_project">DATE</span>;
dolgozok_szama <span class="sf_code_syntax_project">NUMBER</span> <span class="sf_code_syntax_keyword">NOT NULL</span> DEFAULT <span class="sf_code_syntax_number">0</span>;</code></pre>
<p><br></p>
<ul><li>A név az egy azonosító. Az azonosító egy olyan karaktersorozat amely betűvel kezdődik és esetlegesen betűvel, számjeggyel, illetve a $, _, # karakterekkel folytatódhat. Egy azonosító maximális hossza 30 karakter és minden karakter szignifikáns. A PL/SQL a kis- és nagybetűket nem tekinti különbözőnek!
</li><li>Ha egy változónak nem adunk explicit kezdőértéket, akkor alapértelmezett kezdőértéke NULL lesz.
</li></ul>
<br>
<br>
<ul><li>A skaláris változókra és konstansokra (vagy az összetett változók és konstansok skaláris komponenseire) alkalmazhatunk NOT NULL megszorítást.
</li><li>A NOT NULL megszorítás miatt az adott elemhez nem rendelhetünk NULL értéket.
</li><li>A NOT NULL megszorítással rendelkező elemhez kezdőértéket kell rendelni.
</li></ul>
<br>
<h2>DBMS_OUTPUT csomag</h2>
<ul><li>A PL/SQL nem tartalmaz I/O utasításokat.
</li><li>A DBMS<i>OUTPUT csomag segítségével üzenetet helyezhetünk el egy belső pufferbe. A PUT</i>LINE eljárással helyezhetünk el üzenetet a pufferben.
</li><li>A puffer tartalmát megjeleníthetjük a képernyőn a következő SQL*Plus utasítással:
</li></ul>
<p>SET SERVEROUTPUT ON</p>
<br>
<pre><code class='code-multiline'><span class="sf_code_syntax_keyword">BEGIN</span>
	<span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'Hello World!'</span>);
END</code></pre>
<p><br></p>
<h3>Utasítások</h3>
<ul><li>Üres <code class='code-inline'>NULL;</code>
<ul><li>	Átadja a vezérlést a következp utasításnak
</li><li>	Hol hasznos?
<ul><li>		Fejlesztés
</li><li>		Kivételkezelés
</li></ul></li><li>Értékadó <code class='code-inline'>x := 10;</code>
<ul><li>	Az értékadó utasítás egy változó, mező, kollekcióelem vagy objektumattribútum értékét állítja be. Az értéket mindig egy kifejezés segítségével adjuk meg.
</li></ul></li><li>Ugró <code class='code-inline'>GOTO cimke;</code>
<ul><li>	nem használjuk
</li></ul></li><li>Elágaztató
<ul><li>	Feltételes
<ul><li>		Feltétel eredménye lehet TRUE, FALSE, NULL
</li><li>		A IF-THEN alak esetén a tevékenységet a THEN és az END IF alapszavak közé zárt utasítássorozat írja le. Ezek akkor hajtódnak végre, ha a feltétel értéke igaz. Hamis és NULL feltételértékek mellett az IF utasítás nem csinál semmit.
</li><li>		AzIF-THEN-ELSEalakeseténazegyik tevékenységet a THEN és ELSE közötti, a másikat az ELSE és END IF közötti utasítássorozat adja. Ha a feltétel igaz, akkor a THEN utáni, ha hamis vagy NULL, akkor az ELSE utáni utasítássorozat hajtódik végre.
</li><li>		A IF<i>THEN</i>ENDIFalakegyfeltételsorozatot tartalmaz. Ez a feltételsorozat a felírás sorrendjében értékelődik ki. Ha valamelyik igaz értékű, akkor az utána következő THEN-t követő utasítássorozat hajtódik végre. Ha minden feltétel hamis vagy NULL értékű, akkor az ELSE alapszót követő utasítássorozatra kerül a vezérlés, ha nincs ELSE rész, akkor ez egy üres utasítás
</li><li>		A THEN és ELSE után álló utasítások között lehet újabb IF utasítás, az egymásba skatulyázás mélysége tetszőleges.
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<pre><code class='code-multiline'>IF feltétel
	THEN utasítás [utasítás]
	[ELSIF feltétel
		THEN utasítás [utasítás]...]...
	[ELSE utasítás [utasítás]...]...
END IF;</code></pre>
<p><br></p>
<pre><code class='code-multiline'>DECLARE
	v_Nagyobb <span class="sf_code_syntax_project">NUMBER</span>;
	x		  <span class="sf_code_syntax_project">NUMBER</span> :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">7</span>;
	y		  <span class="sf_code_syntax_project">NUMBER</span> :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">6</span>;
<span class="sf_code_syntax_keyword">BEGIN</span>
	v_Nagyobb :<span class="sf_code_syntax_keyword">=</span> x;
	IF x <span class="sf_code_syntax_keyword">&lt;</span> y
		THEN v_Nagyobb :<span class="sf_code_syntax_keyword">=</span> y;
	END IF;
END;</code></pre>
<p><br></p>
<pre><code class='code-multiline'>DECLARE
	v_Nagyobb <span class="sf_code_syntax_project">NUMBER</span>;
	x		  <span class="sf_code_syntax_project">NUMBER</span> :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">5</span>;
	y		  <span class="sf_code_syntax_project">NUMBER</span> :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">6</span>;
<span class="sf_code_syntax_keyword">BEGIN</span>
	IF x <span class="sf_code_syntax_keyword">&lt;</span> y
		THEN v_Nagyobb :<span class="sf_code_syntax_keyword">=</span> y;
		ELSE v_Nagyobb :<span class="sf_code_syntax_keyword">=</span> x;
	END IF;
END;</code></pre>
<p><br></p>
<pre><code class='code-multiline'>DECLARE
	v_Nagyobb <span class="sf_code_syntax_project">NUMBER</span>;
	x		  <span class="sf_code_syntax_project">NUMBER</span> :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">5</span>;
	y		  <span class="sf_code_syntax_project">NUMBER</span> :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">7</span>;
<span class="sf_code_syntax_keyword">BEGIN</span>
	IF x <span class="sf_code_syntax_keyword">&lt;</span> y THEN
		<span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'x kisebb, mint y'</span>);
		v_Nagyobb :<span class="sf_code_syntax_keyword">=</span> y;
	ELSIF x <span class="sf_code_syntax_keyword">&gt;</span> y THEN
		<span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'x nagyobb, mint y'</span>);
		v_Nagyobb :<span class="sf_code_syntax_keyword">=</span> x;
	ELSE
		<span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'x és y egyenlők'</span>);
		v_Nagyobb :<span class="sf_code_syntax_keyword">=</span> x;
	END IF;
END;</code></pre>
<p><br></p>
<pre><code class='code-multiline'>DECLARE
  v_Nagyobb <span class="sf_code_syntax_project">NUMBER</span>;
	x 		  <span class="sf_code_syntax_project">NUMBER</span> :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">5</span>;
	y 		  <span class="sf_code_syntax_project">NUMBER</span> :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">7</span>;
	z 		  <span class="sf_code_syntax_project">NUMBER</span> :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">6</span>;
<span class="sf_code_syntax_keyword">BEGIN</span>
	IF x <span class="sf_code_syntax_keyword">&gt;</span> y
		THEN IF x <span class="sf_code_syntax_keyword">&gt;</span> z
			THEN v_Nagyobb :<span class="sf_code_syntax_keyword">=</span> x;
			ELSE v_Nagyobb :<span class="sf_code_syntax_keyword">=</span> z; END IF;
		ELSE IF y <span class="sf_code_syntax_keyword">&gt;</span> z
			THEN v_Nagyobb :<span class="sf_code_syntax_keyword">=</span> y;
			ELSE v_Nagyobb :<span class="sf_code_syntax_keyword">=</span> z; END IF;
	END IF;
END;</code></pre>
<p><br></p>
<ul><li>	Case utasítás
<ul><li>		A CASE egy olyan elágaztató utasítás, ahol az egymást kölcsönösen kizáró tevékenységek közül egy kifejezés értékei, vagy feltételek teljesülése szerint lehet választani.
</li><li>		Tehát egy CASE utasítás tetszőleges számú WHEN ágból és egy opcionális ELSE ágból áll.
</li><li>		Ha a szelektor_kifejezés szerepel, akkor a WHEN ágakban kifejezés áll, ha nem szerepel, akkor feltétel.
</li></ul>
</li></ul>
<br>
<pre><code class='code-multiline'>CASE [szelektor_kifejezés]
	WHEN {kifejezés | feltétel}
		THEN utasítás [utasítás]...
	[WHEN {kifejezés | feltétel}
		THEN utasítás [utasítás]...]... 
	[ELSE utasítás [utasítás]...]
END CASE;
</code></pre><ul><li>		Működése:
<ul><li>			Ha szerepel szelektor_kifejezés
</li></ul>
</li></ul>
<ol start="1"><li>akkor ez kiértékelődik
</li><li>majd az értéke a felírás sorrendjében hasonlításra kerül a WHEN ágak kifejezéseinek értékeivel.
</li><li>Ha megegyezik valamelyikkel, akkor az adott ágban a THEN után megadott utasítássorozat hajtódik végre.
</li><li>Ha a szelektor<i>kifejezés értéke nem egyezik meg egyetlen kifejezés értékével sem és van ELSE ág, akkor végrehajtódnak az abban megadott utasítások. Ha viszont nincs ELSE ág, akkor a CASE</i>NOT_FOUND kivétel váltódik ki.
</li></ol>
<ul><li>			Ha a CASE alapszó után nincs megadva szelektor_kifejezés
<ul><li>				akkor a felírás sorrendjében sorra kiértékelődnek a feltételek és amelyik igaz értéket vesz fel, annak a WHEN ága kerül kiválasztásra.
</li><li>				A szemantika a továbbiakban azonos a fent leírtakkal.
</li></ul>
</li></ul>
<pre><code class='code-multiline'><span class="sf_code_syntax_keyword">BEGIN</span>
	CASE <span class="sf_code_syntax_number">2</span>
		WHEN <span class="sf_code_syntax_number">1</span> THEN
			<span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'2 = 1'</span>);
		WHEN <span class="sf_code_syntax_number">1</span><span class="sf_code_syntax_keyword">+</span><span class="sf_code_syntax_number">2</span> THEN
			<span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'2 = 1 + 2 '</span>);
		ELSE
			<span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'egyik sem'</span>);
	END CASE;
END</code></pre>
<p><br></p>
<pre><code class='code-multiline'>DECLARE
	v_szam	<span class="sf_code_syntax_project">NUMBER</span>;
<span class="sf_code_syntax_keyword">BEGIN</span>
	v_szam :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">10</span>;
	CASE
		WHEN v_Szam MOD <span class="sf_code_syntax_number">2</span> <span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">0</span>
			THEN <span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'Páros.'</span>);
		WHEN v_Szam <span class="sf_code_syntax_keyword">&lt;</span> <span class="sf_code_syntax_number">5</span>
			THEN <span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'Kisebb 5-nél.'</span>);
		WHEN v_Szam <span class="sf_code_syntax_keyword">&gt;</span> <span class="sf_code_syntax_number">5</span>
			THEN <span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'Nagyobb 5-nél.'</span>);
		ELSE
			<span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'Ez csak az 5 lehet.'</span>);
	END CASE;
END;	</code></pre>
<p><br></p>
<h2>Ciklusok</h2>
<ul><li>	<b>Alapciklus (végtelen ciklus)</b>
<ul><li>		Az alapciklusnál nem adunk információt az ismétlődésre vonatkozóan, tehát ha a magban nem fejeztetjük be a másik három lehetőség valamelyikével, akkor végtelenszer ismétel.
</li></ul>
</li></ul>
<pre><code class='code-multiline'>[címke]
LOOP
	utasítás [utasítás]...]...
END LOOP; </code></pre>
<p><br></p>
<pre><code class='code-multiline'>DECLARE
	a	<span class="sf_code_syntax_project">NUMBER</span>(<span class="sf_code_syntax_number">5</span>) :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">10</span>;
	b	<span class="sf_code_syntax_project">NUMBER</span>(<span class="sf_code_syntax_number">5</span>) :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">10</span>;
<span class="sf_code_syntax_keyword">BEGIN</span>
	LOOP
		b :<span class="sf_code_syntax_keyword">=</span> b <span class="sf_code_syntax_keyword">/</span> a;
		a :<span class="sf_code_syntax_keyword">=</span> a <span class="sf_code_syntax_keyword">-</span> <span class="sf_code_syntax_number">1</span>;
	END LOOP;
END;</code></pre>
<p><br></p>
<ul><li>	<b>WHILE ciklus</b>
<ul><li>		Ennél a ciklusfajtánál az ismétlődést egy feltétel szabályozza. A ciklus működése azzal kezdődik, hogy kiértékelődik a feltétel. Ha értéke igaz, akkor lefut a mag, majd újra kiértékelődik a feltétel. Ha a feltétel értéke hamis vagy NULL lesz, akkor az ismétlődés befejeződik, és a program folytatódik a ciklust követő utasításon.
</li><li>		A WHILE ciklus működésének két szélsőséges esete van. Ha a feltétel a legelső esetben hamis vagy NULL, akkor a ciklusmag egyszer sem fut le (üres ciklus). Ha a feltétel a legelső esetben igaz és a magban nem történik valami olyan, amely ezt az értéket megváltoztatná, akkor az ismétlődés nem fejeződik be (végtelen ciklus).
</li></ul>
</li></ul>
<pre><code class='code-multiline'>[címke]
WHILE feltétel LOOP
	LOOP
END LOOP;</code></pre>
<p><br></p>
<pre><code class='code-multiline'>
DECLARE
	v_Faktorialis <span class="sf_code_syntax_project">NUMBER</span>(<span class="sf_code_syntax_number">5</span>);
	i             PLS_INTEGER;
<span class="sf_code_syntax_keyword">BEGIN</span>
	i :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">1</span>;
	v_Faktorialis :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">1</span>;
	WHILE v_Faktorialis <span class="sf_code_syntax_keyword">*</span> i <span class="sf_code_syntax_keyword">&lt;</span> <span class="sf_code_syntax_number">10</span><span class="sf_code_syntax_keyword">**</span><span class="sf_code_syntax_number">5</span> LOOP
    v_Faktorialis :<span class="sf_code_syntax_keyword">=</span> v_Faktorialis <span class="sf_code_syntax_keyword">*</span> i;
    i :<span class="sf_code_syntax_keyword">=</span> i <span class="sf_code_syntax_keyword">+</span> <span class="sf_code_syntax_number">1</span>;
  END LOOP;
END;
</code></pre><ul><li>	<b>FOR ciklus</b>
<ul><li>		A ciklusváltozó egy implicit módon PLS<i>INTEGER típusúnak deklarált változó, amelynek hatásköre a ciklusmag. (Vagyis a ciklus deklarálja a változót, ezt nekünk nem kell még egyszer megtenni.) Ez a változó rendre felveszi az alsó</i>határ és felső<i>határ által meghatározott egész tartomány minden értékét és minden egyes értékére egyszer lefut a mag. Az alsó</i>határ és felső_határ egész értékű kifejezés lehet. A kifejezések egyszer, a ciklus működésének megkezdése előtt értékelődnek ki.
</li><li>		A REVERSE kulcsszó megadása esetén a ciklusváltozó a tartomány értékeit csökkenően, annak hiányában növekvően veszi fel. Megjegyzendő, hogy REVERSE megadása esetén is a tartománynak az alsó határát kell először megadni.
</li><li>		A ciklusváltozónak a ciklus magjában nem lehet értéket adni, csak az aktuális értékét lehet felhasználni kifejezésben.
</li></ul>
</li></ul>
<pre><code class='code-multiline'>[címke]
FOR ciklusváltozó
	<span class="sf_code_syntax_keyword">IN</span> [REVERSE] alsó_határ..felső_határ
	LOOP 
		utasítás [utasítás]...
END LOOP [címke];</code></pre>
<p><br></p>
<pre><code class='code-multiline'>DECLARE
  v_Osszeg <span class="sf_code_syntax_project">NUMBER</span>(<span class="sf_code_syntax_number">10</span>):<span class="sf_code_syntax_keyword">=</span><span class="sf_code_syntax_number">0</span>;
<span class="sf_code_syntax_keyword">BEGIN</span>
  FOR i <span class="sf_code_syntax_keyword">IN</span> <span class="sf_code_syntax_number">1</span>..<span class="sf_code_syntax_number">100</span> LOOP
    v_Osszeg :<span class="sf_code_syntax_keyword">=</span> v_Osszeg <span class="sf_code_syntax_keyword">+</span> i;
  END LOOP;
END;</code></pre>
<p><br></p>
<pre><code class='code-multiline'>DECLARE
  v_Osszeg <span class="sf_code_syntax_project">NUMBER</span>(<span class="sf_code_syntax_number">10</span>):<span class="sf_code_syntax_keyword">=</span><span class="sf_code_syntax_number">0</span>;
<span class="sf_code_syntax_keyword">BEGIN</span>
FOR i <span class="sf_code_syntax_keyword">IN</span> REVERSE <span class="sf_code_syntax_number">1</span>..<span class="sf_code_syntax_number">100</span> LOOP
    v_Osszeg :<span class="sf_code_syntax_keyword">=</span> v_Osszeg <span class="sf_code_syntax_keyword">+</span> i;
  END LOOP;
END;
</code></pre><ul><li>	Kurzor FOR ciklus
</li><li>	<b>Kilépni:</b> <code class='code-inline'>EXIT [címke] [WHEN feltétel];</code>
<ul><li>		Az EXIT utasítás bármely ciklus magjában kiadható, de ciklusmagon kívül nem használható.
</li><li>		Az EXIT hatására a ciklus működése befejeződik és a program a követő utasításon folytatódik.
</li><li>		Az EXIT címke utasítással az egymásba skatulyázott ciklusok sorozatát fejeztetjük be a megadott címkéjű ciklussal bezárólag.
</li><li>		A WHEN utasításrész a ciklus feltételes befejeződését eredményezi. Csak a feltétel igaz értéke mellett nem folytatódik tovább az ismétlődés.
</li></ul>
</li></ul>
<pre><code class='code-multiline'>DECLARE
  v_Osszeg PLS_INTEGER;
  i        PLS_INTEGER;
<span class="sf_code_syntax_keyword">BEGIN</span>
i :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">1</span>;
v_Osszeg :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">0</span>; LOOP
    v_Osszeg :<span class="sf_code_syntax_keyword">=</span> v_Osszeg <span class="sf_code_syntax_keyword">+</span> i;
    IF v_Osszeg <span class="sf_code_syntax_keyword">&gt;=</span> <span class="sf_code_syntax_number">100</span> THEN
EXIT; <span class="sf_code_syntax_keyword">--</span><span class="sf_code_syntax_comment"> elértük a célt END IF;
</span>    i :<span class="sf_code_syntax_keyword">=</span> i<span class="sf_code_syntax_keyword">+</span><span class="sf_code_syntax_number">1</span>;
  END LOOP;
END;</code></pre>
<p><br></p>
<pre><code class='code-multiline'>
DECLARE
  v_Osszeg PLS_INTEGER;
  i        PLS_INTEGER;
<span class="sf_code_syntax_keyword">BEGIN</span>
i :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">1</span>;
v_Osszeg :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">0</span>; LOOP
v_Osszeg :<span class="sf_code_syntax_keyword">=</span> v_Osszeg <span class="sf_code_syntax_keyword">+</span> i;
EXIT WHEN v_Osszeg <span class="sf_code_syntax_keyword">&gt;=</span> <span class="sf_code_syntax_number">100</span>; <span class="sf_code_syntax_keyword">--</span><span class="sf_code_syntax_comment"> elértük a célt
</span>    i :<span class="sf_code_syntax_keyword">=</span> i<span class="sf_code_syntax_keyword">+</span><span class="sf_code_syntax_number">1</span>;
  END LOOP;
END;</code></pre>
<p><br></p>
<pre><code class='code-multiline'>DECLARE
  v_Osszeg PLS_INTEGER :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">0</span>;
<span class="sf_code_syntax_keyword">BEGIN</span>
  <span class="sf_code_syntax_keyword">&lt;&lt;</span>kulso<span class="sf_code_syntax_keyword">&gt;&gt;</span>
  FOR i <span class="sf_code_syntax_keyword">IN</span> <span class="sf_code_syntax_number">1</span>..<span class="sf_code_syntax_number">100</span> LOOP
FOR j <span class="sf_code_syntax_keyword">IN</span> <span class="sf_code_syntax_number">1</span>..i LOOP
v_Osszeg :<span class="sf_code_syntax_keyword">=</span> v_Osszeg <span class="sf_code_syntax_keyword">+</span> i;
EXIT kulso WHEN v_Osszeg <span class="sf_code_syntax_keyword">&gt;</span> <span class="sf_code_syntax_number">100</span>;
    END LOOP;
  END LOOP;
END;</code></pre>
<p><br></p>
<ul><li>	<b>Folytatni:</b> <code class='code-inline'>CONTINUE [címke] [WHEN feltétel];</code>
<ul><li>		A CONTINUE utasítás bármely ciklus magjában kiadható, de ciklusmagon kívül nem használható.
</li><li>		A CONTINUE hatására kimaradnak a ciklusmag hátralévő utasításai, és a ciklus a következő iterációs lépéssel folytatódik.
</li><li>		A CONTINUE címke utasítással az egymásba skatulyázott ciklusok közül az adott címkéjű ciklus folytatódik a következő iterációs lépéssel.
</li><li>		Ha a WHEN utasításrész meg van adva, akkor a CONTINUE utasítás csak akkor lép a következő iterációs lépésre, ha a feltétel igaz.
</li><li>		A CONTINUE utasítás az Oracle 11g-ben újdonság.
</li></ul>
</li></ul>
<br>
<pre><code class='code-multiline'>DECLARE
 x <span class="sf_code_syntax_project">NUMBER</span> :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">0</span>;
<span class="sf_code_syntax_keyword">BEGIN</span>
	LOOP
		<span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span> (<span class="sf_code_syntax_string">'x='</span><span class="sf_code_syntax_keyword">||</span>x); x :<span class="sf_code_syntax_keyword">=</span> x <span class="sf_code_syntax_keyword">+</span> <span class="sf_code_syntax_number">1</span>;
		IF x <span class="sf_code_syntax_keyword">&lt;</span> <span class="sf_code_syntax_number">3</span>
			THEN CONTINUE;
		END IF;
  		<span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'After CONTINUE:x='</span><span class="sf_code_syntax_keyword">||</span>x);
  		EXIT WHEN x <span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">5</span>;
  END LOOP;
	<span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'After loop:x='</span><span class="sf_code_syntax_keyword">||</span>x);
END;</code></pre>
<p><br></p>
<pre><code class='code-multiline'>DECLARE
 x <span class="sf_code_syntax_project">NUMBER</span> :<span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">0</span>;
<span class="sf_code_syntax_keyword">BEGIN</span>
	LOOP
		<span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'x='</span><span class="sf_code_syntax_keyword">||</span>x);
		x :<span class="sf_code_syntax_keyword">=</span> x <span class="sf_code_syntax_keyword">+</span> <span class="sf_code_syntax_number">1</span>;
		CONTINUE WHEN x <span class="sf_code_syntax_keyword">&lt;</span> <span class="sf_code_syntax_number">3</span>;
		<span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'After CONTINUE:x='</span><span class="sf_code_syntax_keyword">||</span>x);
		EXIT WHEN x <span class="sf_code_syntax_keyword">=</span> <span class="sf_code_syntax_number">5</span>;
	END LOOP;
	<span class="sf_code_syntax_number">DBMS_OUTPUT</span>.<span class="sf_code_syntax_number">PUT_LINE</span>(<span class="sf_code_syntax_string">'After loop:x='</span><span class="sf_code_syntax_keyword">||</span>x);
END;</code></pre>
<p><br></p>
<ul><li>	Aciklusmagismétlődésérevonatkozóinformációkat (amennyiben vannak) a mag előtt, a ciklus fejében kell megadni. Ezek az információk az adott ciklusfajtára nézve egyediek.
</li><li>	Egy ciklus a működését mindig csak a mag első utasításának végrehajtásával kezdheti meg. Egy ciklus befejeződhet, ha
<ul><li>		az ismétlődésre vonatkozó információk ezt kényszerítik ki;
</li><li>		GOTO utasítással kilépünk a magból;
</li><li>		az EXIT utasítással befejeztetjük a ciklust;
</li><li>		Kivétel váltódik ki.
</li></ul></li><li>SQL utasítások
<ul><li>	DML
<ul><li>		INSERT, DELETE, UPDATE
<ul><li>			kiegészülnek egy RETURNING utasításrésszel, segítségével az érintett sorok alapján számított értéket kaphatunk meg
</li></ul></li><li>		MERGE
<ul><li>			„UPSERT” funkcionalitás
</li></ul></li><li>		SELECT
<ul><li>			kiegészül egy INTO (ill. BULK COLLECT INTO) utasításrésszel
</li></ul></li><li>	DCL
<ul><li>		COMMIT, ROLLBACK, SAVEPOINT
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<br>
<br>
<br>
<br>
<p><span class='hashtag'>#University/4_Félév/HDBMS</span></p>
        </div>
        <script type="text/javascript">
            (function() {

    var doc_ols = document.getElementsByTagName("ol");

    for ( i=0; i<doc_ols.length; i++) {

        var ol_start = doc_ols[i].getAttribute("start") - 1;
        doc_ols[i].setAttribute("style", "counter-reset:ol " + ol_start + ";");

    }

})();
        </script>
        <style>
            html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}html{line-height:1}ol,ul{list-style:none}table{border-collapse:collapse;border-spacing:0}caption,th,td{text-align:left;font-weight:normal;vertical-align:middle}q,blockquote{quotes:none}q:before,q:after,blockquote:before,blockquote:after{content:"";content:none}a img{border:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}*{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}html{font-size:87.5%;line-height:1.57143em}html{font-size:14px;line-height:1.6em;-webkit-text-size-adjust:100%}body{background:#fcfcfc;color:#545454;text-rendering:optimizeLegibility;font-family:"AvenirNext-Regular"}a{color:#de4c4f;text-decoration:none}h1{font-family:"AvenirNext-Medium";color:#333;font-size:1.6em;line-height:1.3em;margin-bottom:.78571em}h2{font-family:"AvenirNext-Medium";color:#333;font-size:1.3em;line-height:1em;margin-bottom:.62857em}h3{font-family:"AvenirNext-Medium";color:#333;font-size:1.15em;line-height:1em;margin-bottom:.47143em}p{margin-bottom:1.57143em;hyphens:auto}hr{height:1px;border:0;background-color:#dedede;margin:-1px auto 1.57143em auto}ul,ol{margin-bottom:.31429em}ul ul,ul ol,ol ul,ol ol{margin-bottom:0px}ol li:before{content:counter(ol) ".";counter-increment:ol;color:#e06e73;text-align:right;display:inline-block;min-width:1em;margin-right:0.5em}b,strong{font-family:"AvenirNext-Bold"}i,em{font-family:"AvenirNext-Italic"}code{font-family:"Menlo-Regular"}.text-overflow-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sf_code_syntax_string{color:#D33905}.sf_code_syntax_comment{color:#838383}.sf_code_syntax_documentation_comment{color:#128901}.sf_code_syntax_number{color:#0E73A2}.sf_code_syntax_project{color:#5B2599}.sf_code_syntax_keyword{color:#0E73A2}.sf_code_syntax_character{color:#1B00CE}.sf_code_syntax_preprocessor{color:#920448}.note-wrapper{max-width:46em;margin:0px auto;padding:1.57143em 3.14286em}.note-wrapper.spotlight-preview{overflow-x:hidden}u{text-decoration:none;background-image:linear-gradient(to bottom, rgba(0,0,0,0) 50%,#e06e73 50%);background-repeat:repeat-x;background-size:2px 2px;background-position:0 1.05em}s{color:#878787}p{margin-bottom:0.1em}hr{margin-bottom:0.7em;margin-top:0.7em}ul li{text-indent:-0.35em}ul li:before{content:"•";color:#e06e73;display:inline-block;margin-right:0.3em}ul ul{margin-left:1.25714em}ol li{text-indent:-1.45em}ol ol{margin-left:1.25714em}blockquote{display:block;margin-left:-1em;padding-left:0.8em;border-left:0.2em solid #e06e73}.todo-list ul{margin-left:1.88571em}.todo-list li{text-indent:-1.75em}.todo-list li:before{content:"";display:static;margin-right:0px}.todo-checkbox{text-indent:-1.7em}.todo-checkbox svg{margin-right:0.3em;position:relative;top:0.2em}.todo-checkbox svg #check{display:none}.todo-checkbox.todo-checked #check{display:inline}.todo-checkbox.todo-checked .todo-text{text-decoration:line-through;color:#878787}.code-inline{display:inline;background:white;border:solid 1px #dedede;padding:0.2em 0.5em;font-size:0.9em}.code-multiline{display:block;background:white;border:solid 1px #dedede;padding:0.7em 1em;font-size:0.9em;overflow-x:auto}.hashtag{display:inline-block;color:white;background:#b8bfc2;padding:0.0em 0.5em;border-radius:1em;text-indent:0}.hashtag a{color:#fff}.address a{color:#545454;background-image:linear-gradient(to bottom, rgba(0,0,0,0) 50%,#0da35e 50%);background-repeat:repeat-x;background-size:2px 2px;background-position:0 1.05em}.address svg{position:relative;top:0.2em;display:inline-block;margin-right:0.2em}.color-preview{display:inline-block;width:1em;height:1em;border:solid 1px rgba(0,0,0,0.3);border-radius:50%;margin-right:0.1em;position:relative;top:0.2em;white-space:nowrap}.color-code{margin-right:0.2em;font-family:"Menlo-Regular";font-size:0.9em}.color-hash{opacity:0.4}.ordered-list-number{color:#e06e73;text-align:right;display:inline-block;min-width:1em}.arrow svg{position:relative;top:0.08em;display:inline-block;margin-right:0.15em;margin-left:0.15em}.arrow svg #rod{stroke:#545454}.arrow svg #point{fill:#545454}mark{color:inherit;display:inline-block;padding:0px 4px;background-color:#fcffc0}img{max-width:100%;height:auto}

        </style>
    </body>
</html>
